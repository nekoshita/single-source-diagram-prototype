@startuml
hide circle
rectangle "sample-service" as sample-service {
    rectangle "infra" as sample-service/infra {
        rectangle "BigQuery" as sample-service/infra/BigQuery {
            rectangle "tv_show" as sample-service/infra/BigQuery/tv_show {
                class "talent_relation_scores" as sample-service/infra/BigQuery/tv_show/talent_relation_scores {
                    各タレントとの関連度のスコアを保持するテーブル\nPARTITIONEDテーブル\n\n【スキーマ】\ntv_show_id: string REQUIRED\ntalent_id: string REQUIRED\nscore: float REQUIRED
                }
                class "tv_shows" as sample-service/infra/BigQuery/tv_show/tv_shows {
                    PARTITIONEDテーブル\n【スキーマ】\nid: string REQUIRED\nname: string REQUIRED\nimage_url: string REQUIRED\ndescription: string REQUIRED \ntv_region: string REQUIRED
                }
            }
            rectangle "article" as sample-service/infra/BigQuery/article {
                class "articles" as sample-service/infra/BigQuery/article/articles {
                    PARTITIONEDテーブル\n【スキーマ】\nid: string REQUIRED\nname: string REQUIRED\nimage_url: string REQUIRED\ndescription: string REQUIRED 
                }
                class "talent_relation_scores" as sample-service/infra/BigQuery/article/talent_relation_scores {
                    各タレントとの関連度のスコアを保持するテーブル\nPARTITIONEDテーブル\n\n【スキーマ】\narticle/id: string REQUIRED\ntalent_id: string REQUIRED\nscore: float REQUIRED
                }
            }
            rectangle "movie" as sample-service/infra/BigQuery/movie {
                class "movies" as sample-service/infra/BigQuery/movie/movies {
                    PARTITIONEDテーブル\n【スキーマ】\nid: string REQUIRED\nname: string REQUIRED\nimage_url: string REQUIRED\ndescription: string REQUIRED 
                }
                class "talent_relation_scores" as sample-service/infra/BigQuery/movie/talent_relation_scores {
                    各タレントとの関連度のスコアを保持するテーブル\nPARTITIONEDテーブル\n\n【スキーマ】\nmovie/id: string REQUIRED\ntalent_id: string REQUIRED\nscore: float REQUIRED
                }
            }
        }
        rectangle "CloudSQL" as sample-service/infra/CloudSQL {
            rectangle "user-service" as sample-service/infra/CloudSQL/user-service {
                class "user_settings" as sample-service/infra/CloudSQL/user-service/user_settings {
                    【スキーマ】\nuser_id: string PRIMARY_KEY\ntv_show_region: string NOT_NULL
                }
                class "users" as sample-service/infra/CloudSQL/user-service/users {
                    【スキーマ】\nid: string PRIMARY_KEY\nemail_address: string NOT_NULL\npassword_hash: string NOT_NULL\ncreated_at: timestamp NOT_NULL 
                }
                class "follows" as sample-service/infra/CloudSQL/user-service/follows {
                    【スキーマ】\nuser_id: string PRIMARY_KEY\ntalent_id: string PRIMARY_KEY
                }
            }
            rectangle "article-service" as sample-service/infra/CloudSQL/article-service {
                class "articles" as sample-service/infra/CloudSQL/article-service/articles {
                    【スキーマ】\nid: string PRIMARY_KEY\nname: string NOT_NULL\nimage_url: string NOT_NULL\ndescription: string NOT_NULL 
                }
                class "article_talents" as sample-service/infra/CloudSQL/article-service/article_talents {
                    【スキーマ】\narticle/id: string PRIMARY_KEY\ntalent_id: string PRIMARY_KEY
                }
            }
            rectangle "movie-service" as sample-service/infra/CloudSQL/movie-service {
                class "movies" as sample-service/infra/CloudSQL/movie-service/movies {
                    【スキーマ】\nid: string PRIMARY_KEY\nname: string NOT_NULL\nimage_url: string NOT_NULL\ndescription: string NOT_NULL 
                }
                class "movie_talents" as sample-service/infra/CloudSQL/movie-service/movie_talents {
                    【スキーマ】\nmovie/id: string PRIMARY_KEY\ntalent_id: string PRIMARY_KEY
                }
            }
            rectangle "talent-service" as sample-service/infra/CloudSQL/talent-service {
                class "talents" as sample-service/infra/CloudSQL/talent-service/talents {
                    【スキーマ】\nid: string PRIMARY_KEY\nname: string NOT_NULL\nimage_url: string NOT_NULL\ndescription: string NOT_NULL 
                }
            }
            rectangle "tv-show-service" as sample-service/infra/CloudSQL/tv-show-service {
                class "tv_show_talents" as sample-service/infra/CloudSQL/tv-show-service/tv_show_talents {
                    【スキーマ】\ntv_show_id: string PRIMARY_KEY\ntalent_id: string PRIMARY_KEY
                }
                class "tv_shows" as sample-service/infra/CloudSQL/tv-show-service/tv_shows {
                    【スキーマ】\nid: string PRIMARY_KEY\nname: string NOT_NULL\nimage_url: string NOT_NULL\ndescription: string NOT_NULL \nstart_at: timestamp NOT_NULL \nend_at: timestamp NOT_NULL \ntv_region: string NOT_NULL 
                }
            }
        }
        rectangle "kubernetes" as sample-service/infra/kubernetes {
            rectangle "ingress" as sample-service/infra/kubernetes/ingress {
                class "admin" as sample-service/infra/kubernetes/ingress/admin {
                    admin.sample-service.comでアクセス化\nIAPによる認証あり
                }
                class "user" as sample-service/infra/kubernetes/ingress/user {
                    sample-service.comでアクセス化
                }
            }
            rectangle "job" as sample-service/infra/kubernetes/job {
                rectangle "purge-past-data" as sample-service/infra/kubernetes/job/purge-past-data {
                    rectangle "ref(sample-service/repository/workflows/purge-past-data)" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data {
                        note "schedule: 0 0,12 * * *\n過去の記事とテレビ番組を削除します\n（映画は削除しません）" as sample_service_infra_kubernetes_job_purge_past_data_sample_service_repository_workflows_purge_past_data_note
                        circle "end" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/end
                        rectangle "purge-past-articles" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles {
                            rectangle "ref(sample-service/repository/article-service/batch/purge-past-articles)" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles {
                                circle "1_過去データを削除" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除
                            }
                        }
                        rectangle "purge-past-tv-shows" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows {
                            rectangle "ref(sample-service/repository/tv-show-service/batch/purge-past-tv-shows)" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows {
                                circle "1_過去データを削除" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除
                            }
                        }
                        circle "start" as sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/start
                    }
                }
                rectangle "scrape-and-load-articles" as sample-service/infra/kubernetes/job/scrape-and-load-articles {
                    rectangle "ref(sample-service/repository/workflows/scrape-and-load-articles)" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles {
                        note "schedule: 0,30 * * * *" as sample_service_infra_kubernetes_job_scrape_and_load_articles_sample_service_repository_workflows_scrape_and_load_articles_note
                        circle "end" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/end
                        rectangle "load-articles" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles {
                            rectangle "ref(sample-service/repository/article-service/batch/load-articles)" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles {
                                circle "1_関連度が閾値を超える記事を取得" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得
                                circle "2_記事を保存する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する
                            }
                        }
                        rectangle "scrape-articles-media-a" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a {
                            rectangle "ref(sample-service/repository/article-service/batch/scrape-articles)" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する
                            }
                        }
                        rectangle "scrape-articles-media-b" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b {
                            rectangle "ref(sample-service/repository/article-service/batch/scrape-articles)" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する
                            }
                        }
                        circle "start" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/start
                        rectangle "calc-talent-relation-score" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score {
                            rectangle "ref(sample-service/repository/article-service/batch/calc-talent-relation-score)" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score {
                                circle "1_タレントを取得する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する
                                circle "2_計算対象の記事を取得する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                                circle "3_関連度のスコアを計算する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                                circle "4_関連度のスコアを保存する" as sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                            }
                        }
                    }
                }
                rectangle "scrape-and-load-movies" as sample-service/infra/kubernetes/job/scrape-and-load-movies {
                    rectangle "ref(sample-service/repository/workflows/scrape-and-load-movies)" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies {
                        note "schedule: 0,30 * * * *" as sample_service_infra_kubernetes_job_scrape_and_load_movies_sample_service_repository_workflows_scrape_and_load_movies_note
                        rectangle "scrape-movies-media-b" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b {
                            rectangle "ref(sample-service/repository/movie-service/batch/scrape-movies)" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する
                            }
                        }
                        circle "start" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/start
                        rectangle "calc-talent-relation-score" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score {
                            rectangle "ref(sample-service/repository/movie-service/batch/calc-talent-relation-score)" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score {
                                circle "1_タレントを取得する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する
                                circle "2_計算対象の記事を取得する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                                circle "3_関連度のスコアを計算する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                                circle "4_関連度のスコアを保存する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                            }
                        }
                        circle "end" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/end
                        rectangle "load-movies" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies {
                            rectangle "ref(sample-service/repository/movie-service/batch/load-movies)" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies {
                                circle "1_関連度が閾値を超える映画を取得" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得
                                circle "2_映画を保存する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する
                            }
                        }
                        rectangle "scrape-movies-media-a" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a {
                            rectangle "ref(sample-service/repository/movie-service/batch/scrape-movies)" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する
                            }
                        }
                    }
                }
                rectangle "scrape-and-load-tv-shows" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows {
                    rectangle "ref(sample-service/repository/workflows/scrape-and-load-tv-shows)" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows {
                        note "schedule: 0,30 * * * *" as sample_service_infra_kubernetes_job_scrape_and_load_tv_shows_sample_service_repository_workflows_scrape_and_load_tv_shows_note
                        rectangle "load-tv-shows" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows {
                            rectangle "ref(sample-service/repository/tv-show-service/batch/load-tv-shows)" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows {
                                circle "1_関連度が閾値を超える映画を取得" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得
                                circle "2_テレビ番組を保存する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する
                            }
                        }
                        rectangle "scrape-tv-shows-media-a" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a {
                            rectangle "ref(sample-service/repository/tv-show-service/batch/scrape-tv-shows)" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する
                            }
                        }
                        rectangle "scrape-tv-shows-media-b" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b {
                            rectangle "ref(sample-service/repository/tv-show-service/batch/scrape-tv-shows)" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows {
                                circle "1_各メディアをスクレイプする" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする
                                circle "2_BQに保存する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する
                            }
                        }
                        circle "start" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/start
                        rectangle "calc-talent-relation-score" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score {
                            rectangle "ref(sample-service/repository/tv-show-service/batch/calc-talent-relation-score)" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score {
                                circle "2_計算対象の記事を取得する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                                circle "3_関連度のスコアを計算する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                                circle "4_関連度のスコアを保存する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                                circle "1_タレントを取得する" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する
                            }
                        }
                        circle "end" as sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/end
                    }
                }
            }
            rectangle "service" as sample-service/infra/kubernetes/service {
                rectangle "article-internal-api" as sample-service/infra/kubernetes/service/article-internal-api {
                    rectangle "ref(sample-service/repository/article-service/internal-api)" as sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api {
                        class "記事取得API" as sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api/記事取得API {
                            GET /internal/api/v1/articles\n指定したタレントに関連する記事一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  articles: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                    }
                }
                rectangle "movie-internal-api" as sample-service/infra/kubernetes/service/movie-internal-api {
                    rectangle "ref(sample-service/repository/movie-service/internal-api)" as sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api {
                        class "映画取得API" as sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api/映画取得API {
                            GET /internal/api/v1/movies\n指定したタレントに関連する映画一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  movies: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                    }
                }
                rectangle "talent-internal-api" as sample-service/infra/kubernetes/service/talent-internal-api {
                    rectangle "ref(sample-service/repository/talent-service/internal-api)" as sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api {
                        class "タレント作成API" as sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント作成API {
                            POST /internal/api/v1/talents\n\n【リクエスト】\n{\n  id: string\n  name: string\n  image_url: string\n  description: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                        }
                        class "タレント取得API" as sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API {
                            GET /internal/api/v1/talents\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                    }
                }
                rectangle "tv-show-internal-api" as sample-service/infra/kubernetes/service/tv-show-internal-api {
                    rectangle "ref(sample-service/repository/tv-show-service/internal-api)" as sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api {
                        class "テレビ番組取得API" as sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api/テレビ番組取得API {
                            GET /internal/api/v1/tv_shows\n指定したタレントに関連するテレビ番組一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n  tv_region: string\n}\n\n【レスポンス】\n200: {\n  tv_shows: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n    start_at: timestamp\n    end_at: timestamp\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                    }
                }
                rectangle "user-external-api" as sample-service/infra/kubernetes/service/user-external-api {
                    rectangle "ref(sample-service/repository/user-service/external-api)" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api {
                        rectangle "記事取得API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API {
                            note "GET /api/v1/talents\nフォローしてるタレントに関連する記事一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_infra_kubernetes_service_user_external_api_sample_service_repository_user_service_external_api_記事取得API_note
                            circle "1_フォローしてるタレントID一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得
                            circle "2_タレントに関連する記事一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得
                            circle "3_レスポンス" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/3_レスポンス
                        }
                        class "設定更新API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/設定更新API {
                            POST /api/v1/setting\n\n【リクエスト】\n{\n  tv_region: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                        }
                        rectangle "テレビ番組取得API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API {
                            note "GET /api/v1/tv_shows\nフォローしてるタレントに関連するテレビ番組一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  tv_shows: [{\n    id: string\n    name: string\n    description: string\n    start_at: timestamp\n    end_at: timestamp\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_infra_kubernetes_service_user_external_api_sample_service_repository_user_service_external_api_テレビ番組取得API_note
                            circle "2_タレントに関連するテレビ番組一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得
                            circle "3_レスポンス" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/3_レスポンス
                            circle "1_フォローしてるタレントID一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得
                        }
                        class "フォローAPI" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/フォローAPI {
                            POST /api/v1/follow\n\n【リクエスト】\n{\n  talent_id: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                        }
                        class "新規登録API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/新規登録API {
                            POST /api/v1/create_user\nユーザーを作成し、認証情報を保持するクッキーを返します\n\n【リクエスト】\n{\n  email: string\n  password: string\n}\n\n【レスポンス】\n204: {}\n400: {\n  error_code: string\n}
                        }
                        class "ログインAPI" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/ログインAPI {
                            POST /api/v1/login\nログインに成功すると、認証情報を保持するクッキーを返します\n\n【リクエスト】\n{\n  email: string\n  password: string\n}\n\n【レスポンス】\n204: {}\n400: {\n  error_code: string\n}\n401: {\n  error_code: string\n}
                        }
                        rectangle "映画取得API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API {
                            note "GET /api/v1/movies\nフォローしてるタレントに関連する映画一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  movies: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_infra_kubernetes_service_user_external_api_sample_service_repository_user_service_external_api_映画取得API_note
                            circle "1_フォローしてるタレントID一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得
                            circle "2_タレントに関連する映画一覧を取得" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得
                            circle "3_レスポンス" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/3_レスポンス
                        }
                        rectangle "解約API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API {
                            note "ユーザーと関連する情報を全て削除します\nPOST /api/v1/delete_user\n\n【リクエスト】\n{}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}" as sample_service_infra_kubernetes_service_user_external_api_sample_service_repository_user_service_external_api_解約API_note
                            circle "1_followsを削除" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/1_followsを削除
                            circle "2_user_settingsを削除" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除
                            circle "3_usersを削除" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/3_usersを削除
                            circle "4_レスポンス" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/4_レスポンス
                        }
                        class "設定取得API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/設定取得API {
                            GET /api/v1/setting\n\n【リクエスト】\n{}\n\n【レスポンス】\n200: {\n  tv_region: string\n}\n401: {\n  error_code: string\n}
                        }
                        class "タレント取得API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/タレント取得API {
                            GET /api/v1/talents\n\n【リクエスト】\n{\n  name: string,nullable,値がある場合は部分一致したタレントのみを返す\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                        class "フォロー解除API" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/フォロー解除API {
                            POST /api/v1/unfollow\n\n【リクエスト】\n{\n  talent_id: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                        }
                        class "ログアウトAPI" as sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/ログアウトAPI {
                            POST /api/v1/logout\n認証情報を保持するクッキーを無効化します\n\n【リクエスト】\n{}\n\n【レスポンス】\n204: {}
                        }
                    }
                }
                rectangle "admin-external-api" as sample-service/infra/kubernetes/service/admin-external-api {
                    rectangle "ref(sample-service/repository/admin-service/external-api)" as sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api {
                        class "タレント作成API" as sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント作成API {
                            POST /api/v1/talents\n\n【リクエスト】\n{\n  id: string\n  name: string\n  image_url: string\n  description: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                        }
                        class "タレント取得API" as sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント取得API {
                            GET /api/v1/talents\n\n【リクエスト】\n{\n  name: string,nullable,値がある場合は部分一致したタレントのみを返す\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                        }
                    }
                }
            }
        }
    }
    rectangle "internet" as sample-service/internet {
        circle "tv_show_media_A" as sample-service/internet/tv_show_media_A
        circle "tv_show_media_B" as sample-service/internet/tv_show_media_B
        circle "article_media_A" as sample-service/internet/article_media_A
        circle "article_media_B" as sample-service/internet/article_media_B
        circle "movie_media_A" as sample-service/internet/movie_media_A
        circle "movie_media_B" as sample-service/internet/movie_media_B
    }
    rectangle "repository" as sample-service/repository {
        rectangle "user-service" as sample-service/repository/user-service {
            rectangle "external-api" as sample-service/repository/user-service/external-api {
                rectangle "記事取得API" as sample-service/repository/user-service/external-api/記事取得API {
                    note "GET /api/v1/talents\nフォローしてるタレントに関連する記事一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_repository_user_service_external_api_記事取得API_note
                    circle "1_フォローしてるタレントID一覧を取得" as sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得
                    circle "2_タレントに関連する記事一覧を取得" as sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得
                    circle "3_レスポンス" as sample-service/repository/user-service/external-api/記事取得API/3_レスポンス
                }
                class "設定更新API" as sample-service/repository/user-service/external-api/設定更新API {
                    POST /api/v1/setting\n\n【リクエスト】\n{\n  tv_region: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                }
                rectangle "テレビ番組取得API" as sample-service/repository/user-service/external-api/テレビ番組取得API {
                    note "GET /api/v1/tv_shows\nフォローしてるタレントに関連するテレビ番組一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  tv_shows: [{\n    id: string\n    name: string\n    description: string\n    start_at: timestamp\n    end_at: timestamp\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_repository_user_service_external_api_テレビ番組取得API_note
                    circle "2_タレントに関連するテレビ番組一覧を取得" as sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得
                    circle "3_レスポンス" as sample-service/repository/user-service/external-api/テレビ番組取得API/3_レスポンス
                    circle "1_フォローしてるタレントID一覧を取得" as sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得
                }
                class "フォローAPI" as sample-service/repository/user-service/external-api/フォローAPI {
                    POST /api/v1/follow\n\n【リクエスト】\n{\n  talent_id: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                }
                class "新規登録API" as sample-service/repository/user-service/external-api/新規登録API {
                    POST /api/v1/create_user\nユーザーを作成し、認証情報を保持するクッキーを返します\n\n【リクエスト】\n{\n  email: string\n  password: string\n}\n\n【レスポンス】\n204: {}\n400: {\n  error_code: string\n}
                }
                class "ログインAPI" as sample-service/repository/user-service/external-api/ログインAPI {
                    POST /api/v1/login\nログインに成功すると、認証情報を保持するクッキーを返します\n\n【リクエスト】\n{\n  email: string\n  password: string\n}\n\n【レスポンス】\n204: {}\n400: {\n  error_code: string\n}\n401: {\n  error_code: string\n}
                }
                rectangle "映画取得API" as sample-service/repository/user-service/external-api/映画取得API {
                    note "GET /api/v1/movies\nフォローしてるタレントに関連する映画一覧を返します\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  movies: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}" as sample_service_repository_user_service_external_api_映画取得API_note
                    circle "1_フォローしてるタレントID一覧を取得" as sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得
                    circle "2_タレントに関連する映画一覧を取得" as sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得
                    circle "3_レスポンス" as sample-service/repository/user-service/external-api/映画取得API/3_レスポンス
                }
                rectangle "解約API" as sample-service/repository/user-service/external-api/解約API {
                    note "ユーザーと関連する情報を全て削除します\nPOST /api/v1/delete_user\n\n【リクエスト】\n{}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}" as sample_service_repository_user_service_external_api_解約API_note
                    circle "1_followsを削除" as sample-service/repository/user-service/external-api/解約API/1_followsを削除
                    circle "2_user_settingsを削除" as sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除
                    circle "3_usersを削除" as sample-service/repository/user-service/external-api/解約API/3_usersを削除
                    circle "4_レスポンス" as sample-service/repository/user-service/external-api/解約API/4_レスポンス
                }
                class "設定取得API" as sample-service/repository/user-service/external-api/設定取得API {
                    GET /api/v1/setting\n\n【リクエスト】\n{}\n\n【レスポンス】\n200: {\n  tv_region: string\n}\n401: {\n  error_code: string\n}
                }
                class "タレント取得API" as sample-service/repository/user-service/external-api/タレント取得API {
                    GET /api/v1/talents\n\n【リクエスト】\n{\n  name: string,nullable,値がある場合は部分一致したタレントのみを返す\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                }
                class "フォロー解除API" as sample-service/repository/user-service/external-api/フォロー解除API {
                    POST /api/v1/unfollow\n\n【リクエスト】\n{\n  talent_id: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                }
                class "ログアウトAPI" as sample-service/repository/user-service/external-api/ログアウトAPI {
                    POST /api/v1/logout\n認証情報を保持するクッキーを無効化します\n\n【リクエスト】\n{}\n\n【レスポンス】\n204: {}
                }
            }
        }
        rectangle "workflows" as sample-service/repository/workflows {
            rectangle "purge-past-data" as sample-service/repository/workflows/purge-past-data {
                note "schedule: 0 0,12 * * *\n過去の記事とテレビ番組を削除します\n（映画は削除しません）" as sample_service_repository_workflows_purge_past_data_note
                circle "end" as sample-service/repository/workflows/purge-past-data/end
                rectangle "purge-past-articles" as sample-service/repository/workflows/purge-past-data/purge-past-articles {
                    rectangle "ref(sample-service/repository/article-service/batch/purge-past-articles)" as sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles {
                        circle "1_過去データを削除" as sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除
                    }
                }
                rectangle "purge-past-tv-shows" as sample-service/repository/workflows/purge-past-data/purge-past-tv-shows {
                    rectangle "ref(sample-service/repository/tv-show-service/batch/purge-past-tv-shows)" as sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows {
                        circle "1_過去データを削除" as sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除
                    }
                }
                circle "start" as sample-service/repository/workflows/purge-past-data/start
            }
            rectangle "scrape-and-load-articles" as sample-service/repository/workflows/scrape-and-load-articles {
                note "schedule: 0,30 * * * *" as sample_service_repository_workflows_scrape_and_load_articles_note
                circle "end" as sample-service/repository/workflows/scrape-and-load-articles/end
                rectangle "load-articles" as sample-service/repository/workflows/scrape-and-load-articles/load-articles {
                    rectangle "ref(sample-service/repository/article-service/batch/load-articles)" as sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles {
                        circle "1_関連度が閾値を超える記事を取得" as sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得
                        circle "2_記事を保存する" as sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する
                    }
                }
                rectangle "scrape-articles-media-a" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a {
                    rectangle "ref(sample-service/repository/article-service/batch/scrape-articles)" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する
                    }
                }
                rectangle "scrape-articles-media-b" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b {
                    rectangle "ref(sample-service/repository/article-service/batch/scrape-articles)" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する
                    }
                }
                circle "start" as sample-service/repository/workflows/scrape-and-load-articles/start
                rectangle "calc-talent-relation-score" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score {
                    rectangle "ref(sample-service/repository/article-service/batch/calc-talent-relation-score)" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score {
                        circle "1_タレントを取得する" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する
                        circle "2_計算対象の記事を取得する" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                        circle "3_関連度のスコアを計算する" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                        circle "4_関連度のスコアを保存する" as sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                    }
                }
            }
            rectangle "scrape-and-load-movies" as sample-service/repository/workflows/scrape-and-load-movies {
                note "schedule: 0,30 * * * *" as sample_service_repository_workflows_scrape_and_load_movies_note
                rectangle "scrape-movies-media-b" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b {
                    rectangle "ref(sample-service/repository/movie-service/batch/scrape-movies)" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する
                    }
                }
                circle "start" as sample-service/repository/workflows/scrape-and-load-movies/start
                rectangle "calc-talent-relation-score" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score {
                    rectangle "ref(sample-service/repository/movie-service/batch/calc-talent-relation-score)" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score {
                        circle "1_タレントを取得する" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する
                        circle "2_計算対象の記事を取得する" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                        circle "3_関連度のスコアを計算する" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                        circle "4_関連度のスコアを保存する" as sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                    }
                }
                circle "end" as sample-service/repository/workflows/scrape-and-load-movies/end
                rectangle "load-movies" as sample-service/repository/workflows/scrape-and-load-movies/load-movies {
                    rectangle "ref(sample-service/repository/movie-service/batch/load-movies)" as sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies {
                        circle "1_関連度が閾値を超える映画を取得" as sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得
                        circle "2_映画を保存する" as sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する
                    }
                }
                rectangle "scrape-movies-media-a" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a {
                    rectangle "ref(sample-service/repository/movie-service/batch/scrape-movies)" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する
                    }
                }
            }
            rectangle "scrape-and-load-tv-shows" as sample-service/repository/workflows/scrape-and-load-tv-shows {
                note "schedule: 0,30 * * * *" as sample_service_repository_workflows_scrape_and_load_tv_shows_note
                rectangle "load-tv-shows" as sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows {
                    rectangle "ref(sample-service/repository/tv-show-service/batch/load-tv-shows)" as sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows {
                        circle "1_関連度が閾値を超える映画を取得" as sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得
                        circle "2_テレビ番組を保存する" as sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する
                    }
                }
                rectangle "scrape-tv-shows-media-a" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a {
                    rectangle "ref(sample-service/repository/tv-show-service/batch/scrape-tv-shows)" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する
                    }
                }
                rectangle "scrape-tv-shows-media-b" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b {
                    rectangle "ref(sample-service/repository/tv-show-service/batch/scrape-tv-shows)" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows {
                        circle "1_各メディアをスクレイプする" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする
                        circle "2_BQに保存する" as sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する
                    }
                }
                circle "start" as sample-service/repository/workflows/scrape-and-load-tv-shows/start
                rectangle "calc-talent-relation-score" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score {
                    rectangle "ref(sample-service/repository/tv-show-service/batch/calc-talent-relation-score)" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score {
                        circle "2_計算対象の記事を取得する" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                        circle "3_関連度のスコアを計算する" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                        circle "4_関連度のスコアを保存する" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                        circle "1_タレントを取得する" as sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する
                    }
                }
                circle "end" as sample-service/repository/workflows/scrape-and-load-tv-shows/end
            }
        }
        rectangle "admin-service" as sample-service/repository/admin-service {
            rectangle "external-api" as sample-service/repository/admin-service/external-api {
                class "タレント作成API" as sample-service/repository/admin-service/external-api/タレント作成API {
                    POST /api/v1/talents\n\n【リクエスト】\n{\n  id: string\n  name: string\n  image_url: string\n  description: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                }
                class "タレント取得API" as sample-service/repository/admin-service/external-api/タレント取得API {
                    GET /api/v1/talents\n\n【リクエスト】\n{\n  name: string,nullable,値がある場合は部分一致したタレントのみを返す\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                }
            }
        }
        rectangle "article-service" as sample-service/repository/article-service {
            rectangle "batch" as sample-service/repository/article-service/batch {
                rectangle "calc-talent-relation-score" as sample-service/repository/article-service/batch/calc-talent-relation-score {
                    circle "1_タレントを取得する" as sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する
                    circle "2_計算対象の記事を取得する" as sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                    circle "3_関連度のスコアを計算する" as sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                    circle "4_関連度のスコアを保存する" as sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                }
                rectangle "load-articles" as sample-service/repository/article-service/batch/load-articles {
                    circle "1_関連度が閾値を超える記事を取得" as sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得
                    circle "2_記事を保存する" as sample-service/repository/article-service/batch/load-articles/2_記事を保存する
                }
                rectangle "purge-past-articles" as sample-service/repository/article-service/batch/purge-past-articles {
                    circle "1_過去データを削除" as sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除
                }
                rectangle "scrape-articles" as sample-service/repository/article-service/batch/scrape-articles {
                    circle "1_各メディアをスクレイプする" as sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする
                    circle "2_BQに保存する" as sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する
                }
            }
            rectangle "internal-api" as sample-service/repository/article-service/internal-api {
                class "記事取得API" as sample-service/repository/article-service/internal-api/記事取得API {
                    GET /internal/api/v1/articles\n指定したタレントに関連する記事一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  articles: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                }
            }
        }
        rectangle "movie-service" as sample-service/repository/movie-service {
            rectangle "batch" as sample-service/repository/movie-service/batch {
                rectangle "calc-talent-relation-score" as sample-service/repository/movie-service/batch/calc-talent-relation-score {
                    circle "1_タレントを取得する" as sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する
                    circle "2_計算対象の記事を取得する" as sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                    circle "3_関連度のスコアを計算する" as sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                    circle "4_関連度のスコアを保存する" as sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                }
                rectangle "load-movies" as sample-service/repository/movie-service/batch/load-movies {
                    circle "1_関連度が閾値を超える映画を取得" as sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得
                    circle "2_映画を保存する" as sample-service/repository/movie-service/batch/load-movies/2_映画を保存する
                }
                rectangle "scrape-movies" as sample-service/repository/movie-service/batch/scrape-movies {
                    circle "1_各メディアをスクレイプする" as sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする
                    circle "2_BQに保存する" as sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する
                }
            }
            rectangle "internal-api" as sample-service/repository/movie-service/internal-api {
                class "映画取得API" as sample-service/repository/movie-service/internal-api/映画取得API {
                    GET /internal/api/v1/movies\n指定したタレントに関連する映画一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  movies: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                }
            }
        }
        rectangle "talent-service" as sample-service/repository/talent-service {
            rectangle "internal-api" as sample-service/repository/talent-service/internal-api {
                class "タレント作成API" as sample-service/repository/talent-service/internal-api/タレント作成API {
                    POST /internal/api/v1/talents\n\n【リクエスト】\n{\n  id: string\n  name: string\n  image_url: string\n  description: string\n}\n\n【レスポンス】\n204: {}\n401: {\n  error_code: string\n}
                }
                class "タレント取得API" as sample-service/repository/talent-service/internal-api/タレント取得API {
                    GET /internal/api/v1/talents\n\n【リクエスト】\n{\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n}\n\n【レスポンス】\n200: {\n  talents: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n  }]\n}\n401: {\n  error_code: string\n}
                }
            }
        }
        rectangle "tv-show-service" as sample-service/repository/tv-show-service {
            rectangle "batch" as sample-service/repository/tv-show-service/batch {
                rectangle "calc-talent-relation-score" as sample-service/repository/tv-show-service/batch/calc-talent-relation-score {
                    circle "2_計算対象の記事を取得する" as sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する
                    circle "3_関連度のスコアを計算する" as sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する
                    circle "4_関連度のスコアを保存する" as sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する
                    circle "1_タレントを取得する" as sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する
                }
                rectangle "load-tv-shows" as sample-service/repository/tv-show-service/batch/load-tv-shows {
                    circle "1_関連度が閾値を超える映画を取得" as sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得
                    circle "2_テレビ番組を保存する" as sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する
                }
                rectangle "purge-past-tv-shows" as sample-service/repository/tv-show-service/batch/purge-past-tv-shows {
                    circle "1_過去データを削除" as sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除
                }
                rectangle "scrape-tv-shows" as sample-service/repository/tv-show-service/batch/scrape-tv-shows {
                    circle "1_各メディアをスクレイプする" as sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする
                    circle "2_BQに保存する" as sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する
                }
            }
            rectangle "internal-api" as sample-service/repository/tv-show-service/internal-api {
                class "テレビ番組取得API" as sample-service/repository/tv-show-service/internal-api/テレビ番組取得API {
                    GET /internal/api/v1/tv_shows\n指定したタレントに関連するテレビ番組一覧を返します\n\n【リクエスト】\n{\n  talent_ids: []int\n  cursor: string,nullable,取得した最後のtalent_id\n  limit: int,取得したいtalent数\n  tv_region: string\n}\n\n【レスポンス】\n200: {\n  tv_shows: [{\n    id: string\n    name: string\n    image_url: string\n    description: string\n    start_at: timestamp\n    end_at: timestamp\n  }]\n}\n401: {\n  error_code: string\n}
                }
            }
        }
    }
    rectangle "user" as sample-service/user {
        circle "admin" as sample-service/user/admin
        circle "mobile_app" as sample-service/user/mobile_app
        circle "user" as sample-service/user/user
        circle "web_browser" as sample-service/user/web_browser
    }
}
"sample-service/infra/kubernetes/ingress/admin" --> "sample-service/infra/kubernetes/service/admin-external-api"
"sample-service/infra/kubernetes/ingress/user" --> "sample-service/infra/kubernetes/service/user-external-api"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/end"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/end"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/start" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles"
"sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/start" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/end"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する" --|> "sample-service/infra/BigQuery/article/articles"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する" --|> "sample-service/infra/BigQuery/article/articles"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する" --|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movie_talents"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/end"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する" --|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/end"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する" --|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_A"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_B"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する" --|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows"
"sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api/記事取得API" ..|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api/記事取得API" ..|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api/映画取得API" ..|> "sample-service/infra/CloudSQL/movie-service/movies"
"sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api/映画取得API" ..|> "sample-service/infra/CloudSQL/movie-service/movie_talents"
"sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント作成API" --|> "sample-service/infra/CloudSQL/talent-service/talents"
"sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API" ..|> "sample-service/infra/CloudSQL/talent-service/talents"
"sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api/テレビ番組取得API" ..|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api/テレビ番組取得API" ..|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/3_レスポンス"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" ..|> "sample-service/repository/article-service/internal-api/記事取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" ..|> "sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api/記事取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/設定更新API" --|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/3_レスポンス"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" ..|> "sample-service/repository/tv-show-service/internal-api/テレビ番組取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" ..|> "sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api/テレビ番組取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/フォローAPI" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/新規登録API" --|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/ログインAPI" ..|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/3_レスポンス"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" ..|> "sample-service/repository/movie-service/internal-api/映画取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" ..|> "sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api/映画取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/1_followsを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/1_followsを削除" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/3_usersを削除"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除" --|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/3_usersを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/4_レスポンス"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/3_usersを削除" --|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/設定取得API" ..|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/タレント取得API" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/タレント取得API" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/フォロー解除API" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント作成API" --|> "sample-service/repository/talent-service/internal-api/タレント作成API"
"sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント作成API" --|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント作成API"
"sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント取得API" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/infra/kubernetes/service/admin-external-api/sample-service/repository/admin-service/external-api/タレント取得API" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得"
"sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/user-service/external-api/記事取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得"
"sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" --> "sample-service/repository/user-service/external-api/記事取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" ..|> "sample-service/repository/article-service/internal-api/記事取得API"
"sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/記事取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/記事取得API/2_タレントに関連する記事一覧を取得" ..|> "sample-service/infra/kubernetes/service/article-internal-api/sample-service/repository/article-service/internal-api/記事取得API"
"sample-service/repository/user-service/external-api/設定更新API" --|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" --> "sample-service/repository/user-service/external-api/テレビ番組取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" ..|> "sample-service/repository/tv-show-service/internal-api/テレビ番組取得API"
"sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得" ..|> "sample-service/infra/kubernetes/service/tv-show-internal-api/sample-service/repository/tv-show-service/internal-api/テレビ番組取得API"
"sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得"
"sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/user-service/external-api/テレビ番組取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/テレビ番組取得API/2_タレントに関連するテレビ番組一覧を取得"
"sample-service/repository/user-service/external-api/フォローAPI" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/user-service/external-api/新規登録API" --|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/repository/user-service/external-api/ログインAPI" ..|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得"
"sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得" ..|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/user-service/external-api/映画取得API/1_フォローしてるタレントID一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得"
"sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" --> "sample-service/repository/user-service/external-api/映画取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" ..|> "sample-service/repository/movie-service/internal-api/映画取得API"
"sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/映画取得API/3_レスポンス"
"sample-service/repository/user-service/external-api/映画取得API/2_タレントに関連する映画一覧を取得" ..|> "sample-service/infra/kubernetes/service/movie-internal-api/sample-service/repository/movie-service/internal-api/映画取得API"
"sample-service/repository/user-service/external-api/解約API/1_followsを削除" --> "sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除"
"sample-service/repository/user-service/external-api/解約API/1_followsを削除" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/user-service/external-api/解約API/1_followsを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除"
"sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除" --> "sample-service/repository/user-service/external-api/解約API/3_usersを削除"
"sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除" --|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/repository/user-service/external-api/解約API/2_user_settingsを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/3_usersを削除"
"sample-service/repository/user-service/external-api/解約API/3_usersを削除" --> "sample-service/repository/user-service/external-api/解約API/4_レスポンス"
"sample-service/repository/user-service/external-api/解約API/3_usersを削除" --|> "sample-service/infra/CloudSQL/user-service/users"
"sample-service/repository/user-service/external-api/解約API/3_usersを削除" --> "sample-service/infra/kubernetes/service/user-external-api/sample-service/repository/user-service/external-api/解約API/4_レスポンス"
"sample-service/repository/user-service/external-api/設定取得API" ..|> "sample-service/infra/CloudSQL/user-service/user_settings"
"sample-service/repository/user-service/external-api/タレント取得API" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/user-service/external-api/タレント取得API" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/user-service/external-api/フォロー解除API" --|> "sample-service/infra/CloudSQL/user-service/follows"
"sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/repository/workflows/purge-past-data/purge-past-articles/sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/repository/workflows/purge-past-data/purge-past-articles" --> "sample-service/repository/workflows/purge-past-data/end"
"sample-service/repository/workflows/purge-past-data/purge-past-articles" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/end"
"sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/repository/workflows/purge-past-data/purge-past-tv-shows/sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/repository/workflows/purge-past-data/purge-past-tv-shows" --> "sample-service/repository/workflows/purge-past-data/end"
"sample-service/repository/workflows/purge-past-data/purge-past-tv-shows" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/end"
"sample-service/repository/workflows/purge-past-data/start" --> "sample-service/repository/workflows/purge-past-data/purge-past-articles"
"sample-service/repository/workflows/purge-past-data/start" --> "sample-service/repository/workflows/purge-past-data/purge-past-tv-shows"
"sample-service/repository/workflows/purge-past-data/start" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-articles"
"sample-service/repository/workflows/purge-past-data/start" --> "sample-service/infra/kubernetes/job/purge-past-data/sample-service/repository/workflows/purge-past-data/purge-past-tv-shows"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" --> "sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles" --> "sample-service/repository/workflows/scrape-and-load-articles/end"
"sample-service/repository/workflows/scrape-and-load-articles/load-articles" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/end"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_A"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_B"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する" --|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_A"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_B"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する" --|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a"
"sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b"
"sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-a"
"sample-service/repository/workflows/scrape-and-load-articles/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score" --> "sample-service/repository/workflows/scrape-and-load-articles/load-articles"
"sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-articles/sample-service/repository/workflows/scrape-and-load-articles/load-articles"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_A"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_B"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する" --|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a"
"sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b"
"sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a"
"sample-service/repository/workflows/scrape-and-load-movies/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-b"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score" --> "sample-service/repository/workflows/scrape-and-load-movies/load-movies"
"sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/load-movies"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movies"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movie_talents"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies" --> "sample-service/repository/workflows/scrape-and-load-movies/end"
"sample-service/repository/workflows/scrape-and-load-movies/load-movies" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/end"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_A"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_B"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する" --|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-movies/sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/end"
"sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/end"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_A"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_B"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する" --|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_A"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_B"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する" --|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score"
"sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a"
"sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b"
"sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-a"
"sample-service/repository/workflows/scrape-and-load-tv-shows/start" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows"
"sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score" --> "sample-service/infra/kubernetes/job/scrape-and-load-tv-shows/sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows"
"sample-service/repository/admin-service/external-api/タレント作成API" --|> "sample-service/repository/talent-service/internal-api/タレント作成API"
"sample-service/repository/admin-service/external-api/タレント作成API" --|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント作成API"
"sample-service/repository/admin-service/external-api/タレント取得API" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/admin-service/external-api/タレント取得API" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/article-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-articles/calc-talent-relation-score/sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/article-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" --> "sample-service/repository/article-service/batch/load-articles/2_記事を保存する"
"sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" ..|> "sample-service/infra/BigQuery/article/talent_relation_scores"
"sample-service/repository/article-service/batch/load-articles/1_関連度が閾値を超える記事を取得" --> "sample-service/repository/workflows/scrape-and-load-articles/load-articles/sample-service/repository/article-service/batch/load-articles/2_記事を保存する"
"sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/repository/article-service/batch/load-articles/2_記事を保存する" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/repository/article-service/batch/purge-past-articles/1_過去データを削除" --|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_A"
"sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" ..|> "sample-service/internet/article_media_B"
"sample-service/repository/article-service/batch/scrape-articles/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-articles/scrape-articles-media-b/sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する"
"sample-service/repository/article-service/batch/scrape-articles/2_BQに保存する" --|> "sample-service/infra/BigQuery/article/articles"
"sample-service/repository/article-service/internal-api/記事取得API" ..|> "sample-service/infra/CloudSQL/article-service/articles"
"sample-service/repository/article-service/internal-api/記事取得API" ..|> "sample-service/infra/CloudSQL/article-service/article_talents"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-movies/calc-talent-relation-score/sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/movie-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/movie-service/batch/load-movies/2_映画を保存する"
"sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/movie/talent_relation_scores"
"sample-service/repository/movie-service/batch/load-movies/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/workflows/scrape-and-load-movies/load-movies/sample-service/repository/movie-service/batch/load-movies/2_映画を保存する"
"sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movies"
"sample-service/repository/movie-service/batch/load-movies/2_映画を保存する" --|> "sample-service/infra/CloudSQL/movie-service/movie_talents"
"sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_A"
"sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" ..|> "sample-service/internet/movie_media_B"
"sample-service/repository/movie-service/batch/scrape-movies/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-movies/scrape-movies-media-a/sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する"
"sample-service/repository/movie-service/batch/scrape-movies/2_BQに保存する" --|> "sample-service/infra/BigQuery/movie/movies"
"sample-service/repository/movie-service/internal-api/映画取得API" ..|> "sample-service/infra/CloudSQL/movie-service/movies"
"sample-service/repository/movie-service/internal-api/映画取得API" ..|> "sample-service/infra/CloudSQL/movie-service/movie_talents"
"sample-service/repository/talent-service/internal-api/タレント作成API" --|> "sample-service/infra/CloudSQL/talent-service/talents"
"sample-service/repository/talent-service/internal-api/タレント取得API" ..|> "sample-service/infra/CloudSQL/talent-service/talents"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/3_関連度のスコアを計算する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/4_関連度のスコアを保存する" --|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/calc-talent-relation-score/sample-service/repository/tv-show-service/batch/calc-talent-relation-score/2_計算対象の記事を取得する"
"sample-service/repository/tv-show-service/batch/calc-talent-relation-score/1_タレントを取得する" ..|> "sample-service/infra/kubernetes/service/talent-internal-api/sample-service/repository/talent-service/internal-api/タレント取得API"
"sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する"
"sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" ..|> "sample-service/infra/BigQuery/tv_show/talent_relation_scores"
"sample-service/repository/tv-show-service/batch/load-tv-shows/1_関連度が閾値を超える映画を取得" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/load-tv-shows/sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する"
"sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/repository/tv-show-service/batch/load-tv-shows/2_テレビ番組を保存する" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/repository/tv-show-service/batch/purge-past-tv-shows/1_過去データを削除" --|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_A"
"sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" ..|> "sample-service/internet/tv_show_media_B"
"sample-service/repository/tv-show-service/batch/scrape-tv-shows/1_各メディアをスクレイプする" --> "sample-service/repository/workflows/scrape-and-load-tv-shows/scrape-tv-shows-media-b/sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する"
"sample-service/repository/tv-show-service/batch/scrape-tv-shows/2_BQに保存する" --|> "sample-service/infra/BigQuery/tv_show/tv_shows"
"sample-service/repository/tv-show-service/internal-api/テレビ番組取得API" ..|> "sample-service/infra/CloudSQL/tv-show-service/tv_shows"
"sample-service/repository/tv-show-service/internal-api/テレビ番組取得API" ..|> "sample-service/infra/CloudSQL/tv-show-service/tv_show_talents"
"sample-service/user/admin" --> "sample-service/user/web_browser"
"sample-service/user/mobile_app" --> "sample-service/infra/kubernetes/ingress/user"
"sample-service/user/user" --> "sample-service/user/mobile_app"
"sample-service/user/web_browser" --> "sample-service/infra/kubernetes/ingress/admin"
@enduml
